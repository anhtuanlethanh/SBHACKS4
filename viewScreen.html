<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Your Formulas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  </head>
  <body>
    <div class="container">
      <form>
        <div>
          <label>Search Formula</label>
          <input type="text" id="search" autofocus>
        </div>
        <button class="btn waves-effect waves-red"
                type="button"
                onclick="viewFormula()">View Formula</button>
        <button class="btn waves-effect waves-red"
                type="button"
                onclick="done()">Done</button>
        <button class="btn waves-effect waves-red"
                type="button"
                onclick="calculate()">Calculate</button>
        <!--<div>
          <label>Formula Name</label>
          <input type="text" id="fName">
        </div>-->
        <div>
          <label>Formula</label>
          <output type="text" id="formula">
        </div>
        <div>
          <label>Output</label>
          <output type="text" id="output">
        </div>
      </form>
    </div>

    <script>
      const {ipcRenderer} = require('electron');

      const form = document.querySelector('form');

      var viewedFormula = [];

      function viewFormula() {
        var search = document.querySelector('#search').value;
        if (search.length != 0) {
          var formula = ["UNSET", "UNSET"];

          formula = ipcRenderer.sendSync('function:get', search);
          if (formula != null) {
            //document.querySelector('#fName').value = formula[0];
            document.querySelector('#formula').value = formula[1];
            viewedFormula = formula;
          } else {
            document.querySelector('#formula').value = "Not found!";
          }
        }
      }

      function done() {
        ipcRenderer.send('screen:main');
        console.log('Done with the view screen');
      }

      function calculate() {
        var output = ipcRenderer.sendSync('function:calc', viewedFormula[1], null);
        document.querySelector('#output').value = output;
      }
    </script>
  </body>
</html>
